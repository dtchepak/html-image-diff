<!DOCTYPE html>
<html>
    <head>
        <title>Image diff</title>
    <script>

function byId(id) { return document.getElementById(id); }

function clearChildren(elem) {
    while (elem.firstChild) {
        elem.firstChild.remove();
    }
}

function setImage(file, elem) {
    clearChildren(elem);
    const img = document.createElement("img");
    elem.appendChild(img);

    // based on: https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications
    const reader = new FileReader();
    reader.onload = e => img.src = e.target.result;
    reader.readAsDataURL(file);
}

window.onload = function() {
    const file1 = byId("file1");
    const file2 = byId("file2");
    const image1 = byId("image1");
    const image2 = byId("image2");
    byId("compare").onclick = function(e) {
        setImage(file1.files[0], image1);
        setImage(file2.files[0], image2);
    }
    byId("opacitySlider").oninput = function(e) {
        const value = e.target.value;
        image2.style.opacity = value / 100.0;
    }
}
    </script>
    </head>
    <body>
        <h1>Image diff</h1>

        <div id="settings">
            <input type="file" id="file1" accept="image/png, image/jpeg" />
            <input type="file" id="file2" accept="image/png, image/jpeg" />
            <input type="button" id="compare" value="Compare" />
        </div>

        <div>
            <input type="range" id="opacitySlider" />
        </div>

        <div id="imageContainer" style="position: relative">
            <div id="image1" style="position: absolute"></div>
            <div id="image2" style="position: absolute; opacity: 0.5"></div>
        </div>
    </body>
</html>
